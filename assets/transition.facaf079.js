var pe=Object.defineProperty;var f=(e,t)=>pe(e,"name",{value:t,configurable:!0});import{r as s,R as V}from"./index.92244029.js";import{s as Q,u as E,a as L,S as me,C as G,y as X,j as w,b as Y,o as $,$ as Z}from"./render.b81dc2cd.js";import{C as ve,p as q,s as ee}from"./open-closed.3763bcf9.js";import{t as he}from"./micro-task.d8fd1c47.js";import{j as R,F as xe}from"./jsx-runtime.4268c200.js";function H(){let e=[],t=[],n={enqueue(r){t.push(r)},addEventListener(r,o,p,m){return r.addEventListener(o,p,m),n.add(()=>r.removeEventListener(o,p,m))},requestAnimationFrame(...r){let o=requestAnimationFrame(...r);return n.add(()=>cancelAnimationFrame(o))},nextFrame(...r){return n.requestAnimationFrame(()=>n.requestAnimationFrame(...r))},setTimeout(...r){let o=setTimeout(...r);return n.add(()=>clearTimeout(o))},microTask(...r){let o={current:!0};return he(()=>{o.current&&r[0]()}),n.add(()=>{o.current=!1})},add(r){return e.push(r),()=>{let o=e.indexOf(r);if(o>=0){let[p]=e.splice(o,1);p()}}},dispose(){for(let r of e.splice(0))r()},async workQueue(){for(let r of t.splice(0))await r()}};return n}f(H,"m");function te(){let[e]=s.exports.useState(H);return s.exports.useEffect(()=>()=>e.dispose(),[e]),e}f(te,"p");function re(){let e=s.exports.useRef(!1);return Q(()=>(e.current=!0,()=>{e.current=!1}),[]),e}f(re,"f$1");function Ee(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}f(Ee,"l");function _(e,...t){e&&t.length>0&&e.classList.add(...t)}f(_,"f");function B(e,...t){e&&t.length>0&&e.classList.remove(...t)}f(B,"v");var W=(e=>(e.Ended="ended",e.Cancelled="cancelled",e))(W||{});function be(e,t){let n=H();if(!e)return n.dispose;let{transitionDuration:r,transitionDelay:o}=getComputedStyle(e),[p,m]=[r,o].map(a=>{let[d=0]=a.split(",").filter(Boolean).map(l=>l.includes("ms")?parseFloat(l):parseFloat(l)*1e3).sort((l,u)=>u-l);return d});if(p+m!==0){let a=[];a.push(n.addEventListener(e,"transitionrun",d=>{d.target===d.currentTarget&&(a.splice(0).forEach(l=>l()),a.push(n.addEventListener(e,"transitionend",l=>{l.target===l.currentTarget&&(t("ended"),a.splice(0).forEach(u=>u()))}),n.addEventListener(e,"transitioncancel",l=>{l.target===l.currentTarget&&(t("cancelled"),a.splice(0).forEach(u=>u()))})))}))}else t("ended");return n.add(()=>t("cancelled")),n.dispose}f(be,"c");function ge(e,t,n,r){let o=n?"enter":"leave",p=H(),m=r!==void 0?Ee(r):()=>{};o==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let a=E(o,{enter:()=>t.enter,leave:()=>t.leave}),d=E(o,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),l=E(o,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return B(e,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),_(e,...a,...l),p.nextFrame(()=>{B(e,...l),_(e,...d),be(e,u=>(u==="ended"&&(B(e,...a),_(e,...t.entered)),m(u)))}),p.dispose}f(ge,"C");function Te({container:e,direction:t,classes:n,onStart:r,onStop:o}){let p=re(),m=te(),a=L(t);Q(()=>{let d=H();m.add(d.dispose);let l=e.current;if(!!l&&a.current!=="idle"&&!!p.current)return d.dispose(),r.current(a.current),d.add(ge(l,n.current,a.current==="enter",u=>{d.dispose(),E(u,{[W.Ended](){o.current(a.current)},[W.Cancelled]:()=>{}})})),d.dispose},[t])}f(Te,"I$1");function S(e=""){return e.split(" ").filter(t=>t.trim().length>1)}f(S,"x");let j=s.exports.createContext(null);j.displayName="TransitionContext";var Ce=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Ce||{});function Fe(){let e=s.exports.useContext(j);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}f(Fe,"Ce");function we(){let e=s.exports.useContext(O);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}f(we,"ge");let O=s.exports.createContext(null);O.displayName="NestingContext";function k(e){return"children"in e?k(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}f(k,"I");function ne(e,t){let n=L(e),r=s.exports.useRef([]),o=re(),p=te(),m=$((v,i=w.Hidden)=>{let h=r.current.findIndex(({el:c})=>c===v);h!==-1&&(E(i,{[w.Unmount](){r.current.splice(h,1)},[w.Hidden](){r.current[h].state="hidden"}}),p.microTask(()=>{var c;!k(r)&&o.current&&((c=n.current)==null||c.call(n))}))}),a=$(v=>{let i=r.current.find(({el:h})=>h===v);return i?i.state!=="visible"&&(i.state="visible"):r.current.push({el:v,state:"visible"}),()=>m(v,w.Unmount)}),d=s.exports.useRef([]),l=s.exports.useRef(Promise.resolve()),u=s.exports.useRef({enter:[],leave:[],idle:[]}),b=$((v,i,h)=>{d.current.splice(0),t&&(t.chains.current[i]=t.chains.current[i].filter(([c])=>c!==v)),t==null||t.chains.current[i].push([v,new Promise(c=>{d.current.push(c)})]),t==null||t.chains.current[i].push([v,new Promise(c=>{Promise.all(u.current[i].map(([x,T])=>T)).then(()=>c())})]),i==="enter"?l.current=l.current.then(()=>t==null?void 0:t.wait.current).then(()=>h(i)):h(i)}),g=$((v,i,h)=>{Promise.all(u.current[i].splice(0).map(([c,x])=>x)).then(()=>{var c;(c=d.current.shift())==null||c()}).then(()=>h(i))});return s.exports.useMemo(()=>({children:r,register:a,unregister:m,onStart:b,onStop:g,wait:l,chains:u}),[a,m,r,b,g,u,l])}f(ne,"ee");function Se(){}f(Se,"be");let $e=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function K(e){var t;let n={};for(let r of $e)n[r]=(t=e[r])!=null?t:Se;return n}f(K,"te");function Le(e){let t=s.exports.useRef(K(e));return s.exports.useEffect(()=>{t.current=K(e)},[e]),t}f(Le,"Se");let Re="div",ie=me.RenderStrategy,se=G(function(e,t){let{beforeEnter:n,afterEnter:r,beforeLeave:o,afterLeave:p,enter:m,enterFrom:a,enterTo:d,entered:l,leave:u,leaveFrom:b,leaveTo:g,...v}=e,i=s.exports.useRef(null),h=X(i,t),c=v.unmount?w.Unmount:w.Hidden,{show:x,appear:T,initial:le}=Fe(),[C,M]=s.exports.useState(x?"visible":"hidden"),J=we(),{register:P,unregister:y}=J,N=s.exports.useRef(null);s.exports.useEffect(()=>P(i),[P,i]),s.exports.useEffect(()=>{if(c===w.Hidden&&!!i.current){if(x&&C!=="visible"){M("visible");return}return E(C,{hidden:()=>y(i),visible:()=>P(i)})}},[C,i,P,y,x,c]);let oe=L({enter:S(m),enterFrom:S(a),enterTo:S(d),entered:S(l),leave:S(u),leaveFrom:S(b),leaveTo:S(g)}),A=Le({beforeEnter:n,afterEnter:r,beforeLeave:o,afterLeave:p}),U=Y();s.exports.useEffect(()=>{if(U&&C==="visible"&&i.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[i,C,U]);let I=le&&!T,ae=(()=>!U||I||N.current===x?"idle":x?"enter":"leave")(),ue=$(F=>E(F,{enter:()=>A.current.beforeEnter(),leave:()=>A.current.beforeLeave(),idle:()=>{}})),de=$(F=>E(F,{enter:()=>A.current.afterEnter(),leave:()=>A.current.afterLeave(),idle:()=>{}})),D=ne(()=>{M("hidden"),y(i)},J);Te({container:i,classes:oe,direction:ae,onStart:L(F=>{D.onStart(i,F,ue)}),onStop:L(F=>{D.onStop(i,F,de),F==="leave"&&!k(D)&&(M("hidden"),y(i))})}),s.exports.useEffect(()=>{!I||(c===w.Hidden?N.current=null:N.current=x)},[x,I,C]);let ce=v,fe={ref:h};return R(O.Provider,{value:D,children:R(ve,{value:E(C,{visible:q.Open,hidden:q.Closed}),children:Z({ourProps:fe,theirProps:ce,defaultTag:Re,features:ie,visible:C==="visible",name:"Transition.Child"})})})}),z=G(function(e,t){let{show:n,appear:r=!1,unmount:o,...p}=e,m=s.exports.useRef(null),a=X(m,t);Y();let d=ee();if(n===void 0&&d!==null&&(n=E(d,{[q.Open]:!0,[q.Closed]:!1})),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[l,u]=s.exports.useState(n?"visible":"hidden"),b=ne(()=>{u("hidden")}),[g,v]=s.exports.useState(!0),i=s.exports.useRef([n]);Q(()=>{g!==!1&&i.current[i.current.length-1]!==n&&(i.current.push(n),v(!1))},[i,n]);let h=s.exports.useMemo(()=>({show:n,appear:r,initial:g}),[n,r,g]);s.exports.useEffect(()=>{if(n)u("visible");else if(!k(b))u("hidden");else{let x=m.current;if(!x)return;let T=x.getBoundingClientRect();T.x===0&&T.y===0&&T.width===0&&T.height===0&&u("hidden")}},[n,b]);let c={unmount:o};return R(O.Provider,{value:b,children:R(j.Provider,{value:h,children:Z({ourProps:{...c,as:s.exports.Fragment,children:V.createElement(se,{ref:a,...c,...p})},theirProps:{},defaultTag:s.exports.Fragment,features:ie,visible:l==="visible",name:"Transition"})})})}),Pe=G(function(e,t){let n=s.exports.useContext(j)!==null,r=ee()!==null;return R(xe,{children:!n&&r?V.createElement(z,{ref:t,...e}):V.createElement(se,{ref:t,...e})})}),Oe=Object.assign(z,{Child:Pe,Root:z});export{Oe as W,re as f,H as m,te as p};
//# sourceMappingURL=transition.facaf079.js.map
