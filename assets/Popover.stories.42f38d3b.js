var ce=Object.defineProperty;var T=(e,o)=>ce(e,"name",{value:o,configurable:!0});import{r as l,R as K}from"./index.92244029.js";import{a as M,F as ae,j as b}from"./jsx-runtime.4268c200.js";import{C as V,S as q,y as _,T as de,o as g,u as j,$ as U}from"./render.b81dc2cd.js";import{I as W,o as R,e as ve}from"./keyboard.5353efcb.js";import{r as le}from"./bugs.c0f04768.js";import{d as se,h as X,s as Y,O as A,T as G,F as fe,N as me}from"./hidden.0b7088f1.js";import{C as xe,p as z,s as ie}from"./open-closed.3763bcf9.js";import{s as be}from"./use-resolve-button-type.1338d66b.js";import{L as ge}from"./use-outside-click.585118bf.js";import{n as Z,E as ye,a as ue,s as H}from"./use-event-listener.933c772e.js";import{C as Pe}from"./CaretDown.esm.020d57db.js";import{W as he}from"./transition.facaf079.js";import"./iframe.9e5b487d.js";import"./IconBase.esm.8157fedf.js";import"./micro-task.d8fd1c47.js";var Se=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Se||{}),$e=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))($e||{});let Ee={[0]:e=>({...e,popoverState:j(e.popoverState,{[0]:1,[1]:0})}),[1](e){return e.popoverState===1?e:{...e,popoverState:1}},[2](e,o){return e.button===o.button?e:{...e,button:o.button}},[3](e,o){return e.buttonId===o.buttonId?e:{...e,buttonId:o.buttonId}},[4](e,o){return e.panel===o.panel?e:{...e,panel:o.panel}},[5](e,o){return e.panelId===o.panelId?e:{...e,panelId:o.panelId}}},ee=l.exports.createContext(null);ee.displayName="PopoverContext";function Q(e){let o=l.exports.useContext(ee);if(o===null){let r=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Q),r}return o}T(Q,"Q");let te=l.exports.createContext(null);te.displayName="PopoverAPIContext";function oe(e){let o=l.exports.useContext(te);if(o===null){let r=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,oe),r}return o}T(oe,"re");let re=l.exports.createContext(null);re.displayName="PopoverGroupContext";function pe(){return l.exports.useContext(re)}T(pe,"ce");let ne=l.exports.createContext(null);ne.displayName="PopoverPanelContext";function Ie(){return l.exports.useContext(ne)}T(Ie,"Oe");function we(e,o){return j(o.type,Ee,e,o)}T(we,"Me");let Ce="div",Te=V(function(e,o){var r;let m=`headlessui-popover-button-${W()}`,a=`headlessui-popover-panel-${W()}`,c=l.exports.useRef(null),S=_(o,de(t=>{c.current=t})),$=l.exports.useReducer(we,{popoverState:1,button:null,buttonId:m,panel:null,panelId:a,beforePanelSentinel:l.exports.createRef(),afterPanelSentinel:l.exports.createRef()}),[{popoverState:v,button:i,panel:n,beforePanelSentinel:D,afterPanelSentinel:w},x]=$,u=Z((r=c.current)!=null?r:i);l.exports.useEffect(()=>x({type:3,buttonId:m}),[m,x]),l.exports.useEffect(()=>x({type:5,panelId:a}),[a,x]);let d=l.exports.useMemo(()=>{if(!i||!n)return!1;for(let B of document.querySelectorAll("body > *"))if(Number(B==null?void 0:B.contains(i))^Number(B==null?void 0:B.contains(n)))return!0;let t=se(),s=t.indexOf(i),f=(s+t.length-1)%t.length,C=(s+1)%t.length,F=t[f],L=t[C];return!n.contains(F)&&!n.contains(L)},[i,n]),y=l.exports.useMemo(()=>({buttonId:m,panelId:a,close:()=>x({type:1})}),[m,a,x]),P=pe(),E=P==null?void 0:P.registerPopover,O=g(()=>{var t;return(t=P==null?void 0:P.isFocusWithinPopoverGroup())!=null?t:(u==null?void 0:u.activeElement)&&((i==null?void 0:i.contains(u.activeElement))||(n==null?void 0:n.contains(u.activeElement)))});l.exports.useEffect(()=>E==null?void 0:E(y),[E,y]),ye(u==null?void 0:u.defaultView,"focus",t=>{var s,f,C,F;v===0&&(O()||!i||!n||(f=(s=D.current)==null?void 0:s.contains)!=null&&f.call(s,t.target)||(F=(C=w.current)==null?void 0:C.contains)!=null&&F.call(C,t.target)||x({type:1}))},!0),ge([i,n],(t,s)=>{x({type:1}),fe(s,me.Loose)||(t.preventDefault(),i==null||i.focus())},v===0);let k=g(t=>{x({type:1});let s=(()=>t?t instanceof HTMLElement?t:"current"in t&&t.current instanceof HTMLElement?t.current:i:i)();s==null||s.focus()}),p=l.exports.useMemo(()=>({close:k,isPortalled:d}),[k,d]),I=l.exports.useMemo(()=>({open:v===0,close:k}),[v,k]),h=e,N={ref:S};return K.createElement(ee.Provider,{value:$},K.createElement(te.Provider,{value:p},K.createElement(xe,{value:j(v,{[0]:z.Open,[1]:z.Closed})},U({ourProps:N,theirProps:h,slot:I,defaultTag:Ce,name:"Popover"}))))}),ke="button",Ne=V(function(e,o){let[r,m]=Q("Popover.Button"),{isPortalled:a}=oe("Popover.Button"),c=l.exports.useRef(null),S=`headlessui-focus-sentinel-${W()}`,$=pe(),v=$==null?void 0:$.closeOthers,i=Ie(),n=i===null?!1:i===r.panelId,D=_(c,o,n?null:t=>m({type:2,button:t})),w=_(c,o),x=Z(c),u=g(t=>{var s,f,C;if(n){if(r.popoverState===1)return;switch(t.key){case R.Space:case R.Enter:t.preventDefault(),(f=(s=t.target).click)==null||f.call(s),m({type:1}),(C=r.button)==null||C.focus();break}}else switch(t.key){case R.Space:case R.Enter:t.preventDefault(),t.stopPropagation(),r.popoverState===1&&(v==null||v(r.buttonId)),m({type:0});break;case R.Escape:if(r.popoverState!==0)return v==null?void 0:v(r.buttonId);if(!c.current||(x==null?void 0:x.activeElement)&&!c.current.contains(x.activeElement))return;t.preventDefault(),t.stopPropagation(),m({type:1});break}}),d=g(t=>{n||t.key===R.Space&&t.preventDefault()}),y=g(t=>{var s,f;le(t.currentTarget)||e.disabled||(n?(m({type:1}),(s=r.button)==null||s.focus()):(t.preventDefault(),t.stopPropagation(),r.popoverState===1&&(v==null||v(r.buttonId)),m({type:0}),(f=r.button)==null||f.focus()))}),P=g(t=>{t.preventDefault(),t.stopPropagation()}),E=r.popoverState===0,O=l.exports.useMemo(()=>({open:E}),[E]),k=be(e,c),p=e,I=n?{ref:w,type:k,onKeyDown:u,onClick:y}:{ref:D,id:r.buttonId,type:k,"aria-expanded":e.disabled?void 0:r.popoverState===0,"aria-controls":r.panel?r.panelId:void 0,onKeyDown:u,onKeyUp:d,onClick:y,onMouseDown:P},h=ue(),N=g(()=>{let t=r.panel;if(!t)return;function s(){j(h.current,{[H.Forwards]:()=>A(t,G.First),[H.Backwards]:()=>A(t,G.Last)})}T(s,"p"),s()});return M(ae,{children:[U({ourProps:I,theirProps:p,slot:O,defaultTag:ke,name:"Popover.Button"}),E&&!n&&a&&b(X,{id:S,features:Y.Focusable,as:"button",type:"button",onFocus:N})]})}),Fe="div",Oe=q.RenderStrategy|q.Static,De=V(function(e,o){let[{popoverState:r},m]=Q("Popover.Overlay"),a=_(o),c=`headlessui-popover-overlay-${W()}`,S=ie(),$=(()=>S!==null?S===z.Open:r===0)(),v=g(n=>{if(le(n.currentTarget))return n.preventDefault();m({type:1})}),i=l.exports.useMemo(()=>({open:r===0}),[r]);return U({ourProps:{ref:a,id:c,"aria-hidden":!0,onClick:v},theirProps:e,slot:i,defaultTag:Fe,features:Oe,visible:$,name:"Popover.Overlay"})}),Be="div",Me=q.RenderStrategy|q.Static,Re=V(function(e,o){let{focus:r=!1,...m}=e,[a,c]=Q("Popover.Panel"),{close:S,isPortalled:$}=oe("Popover.Panel"),v=`headlessui-focus-sentinel-before-${W()}`,i=`headlessui-focus-sentinel-after-${W()}`,n=l.exports.useRef(null),D=_(n,o,p=>{c({type:4,panel:p})}),w=Z(n),x=ie(),u=(()=>x!==null?x===z.Open:a.popoverState===0)(),d=g(p=>{var I;switch(p.key){case R.Escape:if(a.popoverState!==0||!n.current||(w==null?void 0:w.activeElement)&&!n.current.contains(w.activeElement))return;p.preventDefault(),p.stopPropagation(),c({type:1}),(I=a.button)==null||I.focus();break}});l.exports.useEffect(()=>{var p;e.static||a.popoverState===1&&((p=e.unmount)!=null?p:!0)&&c({type:4,panel:null})},[a.popoverState,e.unmount,e.static,c]),l.exports.useEffect(()=>{if(!r||a.popoverState!==0||!n.current)return;let p=w==null?void 0:w.activeElement;n.current.contains(p)||A(n.current,G.First)},[r,n,a.popoverState]);let y=l.exports.useMemo(()=>({open:a.popoverState===0,close:S}),[a,S]),P={ref:D,id:a.panelId,onKeyDown:d,onBlur:r&&a.popoverState===0?p=>{var I,h,N,t,s;let f=p.relatedTarget;!f||!n.current||(I=n.current)!=null&&I.contains(f)||(c({type:1}),(((N=(h=a.beforePanelSentinel.current)==null?void 0:h.contains)==null?void 0:N.call(h,f))||((s=(t=a.afterPanelSentinel.current)==null?void 0:t.contains)==null?void 0:s.call(t,f)))&&f.focus({preventScroll:!0}))}:void 0,tabIndex:-1},E=ue(),O=g(()=>{let p=n.current;if(!p)return;function I(){j(E.current,{[H.Forwards]:()=>{A(p,G.First)},[H.Backwards]:()=>{var h;(h=a.button)==null||h.focus({preventScroll:!0})}})}T(I,"S"),I()}),k=g(()=>{let p=n.current;if(!p)return;function I(){j(E.current,{[H.Forwards]:()=>{var h,N,t;if(!a.button)return;let s=se(),f=s.indexOf(a.button),C=s.slice(0,f+1),F=[...s.slice(f+1),...C];for(let L of F.slice())if(((N=(h=L==null?void 0:L.id)==null?void 0:h.startsWith)==null?void 0:N.call(h,"headlessui-focus-sentinel-"))||((t=a.panel)==null?void 0:t.contains(L))){let B=F.indexOf(L);B!==-1&&F.splice(B,1)}A(F,G.First,!1)},[H.Backwards]:()=>A(p,G.Last)})}T(I,"S"),I()});return K.createElement(ne.Provider,{value:a.panelId},u&&$&&b(X,{id:v,ref:a.beforePanelSentinel,features:Y.Focusable,as:"button",type:"button",onFocus:O}),U({ourProps:P,theirProps:m,slot:y,defaultTag:Be,features:Me,visible:u,name:"Popover.Panel"}),u&&$&&b(X,{id:i,ref:a.afterPanelSentinel,features:Y.Focusable,as:"button",type:"button",onFocus:k}))}),Le="div",Ae=V(function(e,o){let r=l.exports.useRef(null),m=_(r,o),[a,c]=l.exports.useState([]),S=g(u=>{c(d=>{let y=d.indexOf(u);if(y!==-1){let P=d.slice();return P.splice(y,1),P}return d})}),$=g(u=>(c(d=>[...d,u]),()=>S(u))),v=g(()=>{var u;let d=ve(r);if(!d)return!1;let y=d.activeElement;return(u=r.current)!=null&&u.contains(y)?!0:a.some(P=>{var E,O;return((E=d.getElementById(P.buttonId))==null?void 0:E.contains(y))||((O=d.getElementById(P.panelId))==null?void 0:O.contains(y))})}),i=g(u=>{for(let d of a)d.buttonId!==u&&d.close()}),n=l.exports.useMemo(()=>({registerPopover:$,unregisterPopover:S,isFocusWithinPopoverGroup:v,closeOthers:i}),[$,S,v,i]),D=l.exports.useMemo(()=>({}),[]),w=e,x={ref:m};return K.createElement(re.Provider,{value:n},U({ourProps:x,theirProps:w,slot:D,defaultTag:Le,name:"Popover.Group"}))}),J=Object.assign(Te,{Button:Ne,Overlay:De,Panel:Re,Group:Ae});const Ge=[{name:"banana",description:"Duas por dia, 14 por semana.",href:"##",icon:"./banana.png"},{name:"ma\xE7a",description:"Uma por dia, 7 por semana.",href:"##",icon:"./maca.png"},{name:"mam\xE3o",description:"Meia unidade, 3x por semana.",href:"##",icon:"./mamao.png"}];function He(){return b("div",{className:"w-full",children:b(J,{className:"relative",children:({open:e})=>M(ae,{children:[M(J.Button,{"aria-expanded":"false","aria-label":"Abrir Popover","aria-haspopup":"dialog",title:"Popover",className:`
                ${e?"":"text-opacity-90"}
                inline-flex items-center py-3 px-4 bg-cyan-500 rounded font-semibold text-black transition-colors hover:bg-cyan-300 focus:ring-2 ring-white`,children:["Popover",b(Pe,{className:`${e?"":"text-opacity-70"}
                  ml-2 h-5 w-5 text-gray-900 transition duration-150 ease-in-out group-hover:text-opacity-80`,"aria-hidden":"true"})]}),b(he,{as:l.exports.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:b(J.Panel,{className:"absolute  pc:left-1/4 mob:left-1/2 z-10 mt-3 w-screen max-w-sm -translate-x-1/2 transform px-4 mob:px-0 pc:max-w-xl mob:max-w-[300px]",children:M("div",{className:"overflow-hidden rounded-lg shadow-lg ring-1 ring-black ring-opacity-5",children:[b("div",{className:"relative grid gap-8 bg-gray-800 p-6 mob:grid-cols-1 pc:grid-cols-2",children:Ge.map(o=>M("a",{href:o.href,className:"-m-3 flex items-center rounded-lg p-2 transition duration-150 ease-in-out hover:bg-cyan-300 text-gray-100 hover:text-black focus:outline-none focus-visible:ring focus-visible:ring-orange-500 focus-visible:ring-opacity-50",children:[b("img",{className:"w-9 h-9",src:o.icon,"aria-hidden":"true"}),M("div",{className:"grid ml-4",children:[b("span",{className:"text-sm",children:o.name}),b("span",{className:"text-xs text-gray-500",children:o.description})]})]},o.name))}),b("div",{className:"bg-gray-700 p-4",children:M("a",{href:"##",className:"flow-root rounded-md px-2 transition duration-150 ease-in-out hover:bg-cyan-300 text-gray-100 hover:text-black focus:outline-none focus-visible:ring focus-visible:ring-orange-500 focus-visible:ring-opacity-50",children:[b("span",{className:"flex text-sm items-center",children:"Salada de frutas"}),b("span",{className:"text-xs text-gray-400",children:"Incluir laranja e uva verde sem caro\xE7o."})]})})]})})})]})})})}T(He,"MyPopover");const rt={title:"Components/Popover",component:He,args:{},argTypes:{}},nt={},at=["Default"];export{nt as Default,at as __namedExportsOrder,rt as default};
//# sourceMappingURL=Popover.stories.42f38d3b.js.map
